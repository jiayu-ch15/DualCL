import numpy as np
from PIL import Image

def save_video(x):
    # turn over
    x = x.transpose(0, 2, 3, 1)
    x = x[..., :3]
    frames = []
    for i in range(int(x.shape[0]/20)):
        image = Image.fromarray(x[i].astype('uint8'), mode="RGB")
        frames.append(image)
    frames[0].save('animation.gif', save_all=True, append_images=frames[1:], duration=100, loop=0)

video = np.load('video.npy')
save_video(video)